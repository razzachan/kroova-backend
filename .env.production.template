# üöÄ Krouva Backend (ex-Kroova) - Production Environment Template
# Copy to .env.production and fill with real values

# ======================================
# SERVER CONFIGURATION
# ======================================
PORT=3333
NODE_ENV=production

# ======================================
# üîí ENCRYPTION (Wallet Custodial)
# ======================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# CRITICAL: Store in secrets manager (AWS Secrets Manager, 1Password, etc)
ENCRYPTION_KEY=

# ======================================
# üóÑÔ∏è SUPABASE (Database)
# ======================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=eyJhbG...
SUPABASE_SERVICE_KEY=eyJhbG...

# ======================================
# üîë JWT (Authentication)
# ======================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=

# ======================================
# üí≥ STRIPE (Payment Gateway)
# ======================================
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PUBLISHABLE_KEY=pk_live_...

# ======================================
# ü™ô POLYGON (Blockchain - NFT Minting)
# ======================================
POLYGON_RPC_URL=https://polygon-mainnet.infura.io/v3/YOUR-PROJECT-ID
# Or Alchemy: https://polygon-mainnet.g.alchemy.com/v2/YOUR-API-KEY
WALLET_PRIVATE_KEY=0x...
# CRITICAL: Master wallet - store in secrets manager

# ======================================
# üåê APP URLS
# ======================================
APP_URL=https://api.kroova.gg
FRONTEND_URL=https://kroova.gg
# Transi√ß√£o de marca (usar quando DNS ativo)
NEW_APP_URL=https://api.krouva.gg
NEW_FRONTEND_URL=https://krouva.gg

# ======================================
# üîÑ REDIS (BullMQ - Job Queue)
# ======================================
REDIS_HOST=your-redis-host.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_TLS=true

# ======================================
# üìß EMAIL (SMTP)
# ======================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@kroova.gg
SMTP_PASS=your-app-password
SMTP_FROM=Krouva <noreply@kroova.gg>

# ======================================
# üìä ECONOMIC SERIES (Observability)
# ======================================
# Persistence - MUST be enabled in production
ENABLE_ECONOMIC_SERIES_PERSISTENCE=true

# Integrity - MUST be enabled for hash chain
ENABLE_ECONOMIC_SERIES_INTEGRITY=true

# Secret for HMAC signatures (256-bit)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ECONOMIC_SERIES_SECRET=

# Webhook URL for RTP alerts (Slack/Discord/PagerDuty)
ECONOMIC_SERIES_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# RTP Alert Thresholds (percentage points)
RTP_ALERT_THRESHOLD_HIGH=25
RTP_ALERT_THRESHOLD_LOW=10

# Alert Cooldown (seconds) - prevents spam
RTP_ALERT_COOLDOWN_SECONDS=3600

# Query Limits
ECONOMIC_SERIES_QUERY_LIMIT=100

# ======================================
# üéÆ GAME CONFIGURATION
# ======================================
# Edition settings
DEFAULT_EDITION=ED01

# Booster settings
BOOSTER_PRICE_BRL=0.50
CARDS_PER_BOOSTER=5

# ======================================
# üîê SECURITY & RATE LIMITING
# ======================================
# API Rate Limits (requests per window)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# CORS Origins (comma-separated)
CORS_ORIGINS=https://kroova.gg,https://www.kroova.gg,https://krouva.gg,https://www.krouva.gg

# ======================================
# üìà MONITORING & LOGGING
# ======================================
# Log Level: error, warn, info, debug
LOG_LEVEL=info

# Sentry DSN (error tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ======================================
# üß™ FEATURE FLAGS (Optional)
# ======================================
ENABLE_MARKETPLACE=true
ENABLE_CARD_RECYCLING=true
ENABLE_NFT_MINTING=true
ENABLE_PIX_PAYMENTS=true

# ======================================
# üì¶ CDN & STORAGE (Optional)
# ======================================
# AWS S3 for card images
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=kroova-card-images  # TODO Fase 2: alterar para krouva-card-images quando bucket existir

# CloudFlare CDN
CLOUDFLARE_ZONE_ID=
CLOUDFLARE_API_TOKEN=

# ======================================
# üîç ANALYTICS (Optional)
# ======================================
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
MIXPANEL_TOKEN=your-mixpanel-token

# ======================================
# üö® ALERTS & NOTIFICATIONS
# ======================================
# Slack webhook for critical alerts
SLACK_WEBHOOK_CRITICAL=https://hooks.slack.com/services/YOUR/CRITICAL/WEBHOOK

# Discord webhook for general alerts
DISCORD_WEBHOOK_GENERAL=https://discord.com/api/webhooks/YOUR/WEBHOOK

# PagerDuty integration key
PAGERDUTY_INTEGRATION_KEY=

# ======================================
# üõ°Ô∏è FIREWALL & WHITELIST
# ======================================
# Internal endpoints (/internal/*) allowed IPs (comma-separated)
INTERNAL_ENDPOINTS_WHITELIST=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Admin API keys (comma-separated, for emergency access)
ADMIN_API_KEYS=

# ======================================
# üîÑ BACKUP & DISASTER RECOVERY
# ======================================
# Automated backup webhook (to trigger external backup)
BACKUP_WEBHOOK_URL=

# Backup encryption key (separate from main encryption)
BACKUP_ENCRYPTION_KEY=

# ======================================
# DEPLOYMENT INFO (Auto-populated by CI/CD)
# ======================================
DEPLOY_VERSION=
DEPLOY_COMMIT_SHA=
DEPLOY_TIMESTAMP=
DEPLOY_ENVIRONMENT=production
